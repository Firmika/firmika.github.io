# 贪心

## 基本思想

### 适用范围

贪心算法在有最优子结构的问题中尤为有效。最优子结构的意思是问题能够分解成子问题来解决，子问题的最优解能递推到最终问题的最优解。

贪心算法有两种证明方法：反证法和归纳法

### 常见技巧

最常见的贪心有两种。

- 「我们将 XXX 按照某某顺序排序，然后按某种顺序（例如从小到大）选择。」。
- 「我们每次都取 XXX 中最大/小的东西，并更新 XXX。」（有时「XXX 中最大/小的东西」可以优化，比如用优先队列维护）

二者的区别在于一种是离线的，先处理后选择；一种是在线的，边处理边选择。

### 有用的思考方式

#### 排序解法

用排序法常见的情况是输入一个包含几个（一般一到两个）权值的数组，通过排序然后遍历模拟计算的方法求出最优值。

#### 邻项交换法

在排列问题中，假设初始状态以某种方式排列好，再通过交换邻居位置达到最佳方案。通过分析何时需要交换邻居，从而达到最佳方案。

注意，该方案仅在邻居交换条件为偏序时才正确，此时可以直接用排序解决问题。

**例题：**[NOIP 2021 国王游戏](https://vijos.org/p/1779)

#### 后悔解法

思路是无论当前的选项是否最优都接受，然后进行比较，如果选择之后不是最优了，则反悔，舍弃掉这个选项；否则，正式接受。如此往复。

**例题：**[USACO09OPEN 工作调度 Work Scheduling G ](https://www.luogu.com.cn/problem/P2949)

#### 二分＋贪心

当答案具有单调性，且可以利用贪心在较低时间复杂度内被验证时，可采用二分枚举答案，并用贪心验证答案的方法，一般可以达到$O(nlog)$的时间复杂度。

**例题：**[Leetcode 2594.修车的最少时间](https://leetcode.cn/problems/minimum-time-to-repair-cars)



## 精选例题

### [NOIP 2021 国王游戏](https://vijos.org/p/1779)

**题目大意：**给出正整数$n$和数列$a_n$，$b_n$，设计一个排列，使得
$$
p_k = max\left(\frac{\prod_{i=0}^{k-1}a_i}{b_k}\right)=max\left(\frac{s_{k-1}}{b_k}\right) (0< k\leq n)
$$
最小，并输出最小的该值。

**方法1：邻项交换法**

**基本思想**

显然，交换任意两个邻居只影响这两个邻居的$p_i$。

下面分析何时需要交换两个邻居，设第一个邻居引导为$i$，$s=s_{i-1}$

交换前，两个邻居对答案的贡献为
$$
max\left(\frac{s}{b_i},\frac{sa_i}{b_{i+1}}\right)
$$
交换后，两个邻居对答案的贡献为
$$
max\left(\frac{s}{b_{i+1}},\frac{sa_{i+1}}{b_i}\right)
$$
两个邻居交换后对答案有贡献，当且仅当
$$
max\left(\frac{s}{b_i},\frac{sa_i}{b_{i+1}}\right)>max\left(\frac{s}{b_{i+1}},\frac{sa_{i+1}}{b_i}\right)
$$
因为
$$
\frac{s}{b_i}<\frac{sa_{i+1}}{b_i},\frac{s}{b_{i+1}}\frac{sa_i}{b_{i+1}}
$$
上式等价于
$$
\begin{align*}
&\frac{sa_i}{b_{i+1}}>\frac{sa_{i+1}}{b_i}&\\
i.e.,&a_ib_i>a_{i+1}b_{i+1}&
\end{align*}
$$
注意到该式显然是一个偏序关系，因此以此最优方案的任意相邻元素一定满足
$$
a_ib_i\leq a_{i+1}b_{i+1}
$$
以上式为排序函数对原序列进行排序即可得到最优方案。

注意到这题要AC还要写一个高精度。

**时间复杂度：**$O(nlogn)$

**空间复杂度：**$O(n)$



已知：
$$
Min(a_i,b_j)\geq Min(a_j,b_i)\\
Min(a_j,b_k)\geq Min(a_k,b_j)
$$
求证：
$$
Min(a_i,b_k)\geq Min(a_k,b_i)
$$
